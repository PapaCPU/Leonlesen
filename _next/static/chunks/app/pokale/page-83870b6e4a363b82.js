(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[697],{4682:(e,t,r)=>{Promise.resolve().then(r.bind(r,3923))},3923:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>d});var n=r(1133),s=r(1321),i=r(3587),a=r.n(i);let l=e=>{let{count:t,maxCount:r}=e;return(0,n.jsxs)("div",{className:"w-full space-y-4",children:[(0,n.jsxs)("div",{className:"text-center",children:[(0,n.jsx)("p",{className:"text-lg mb-2",children:"Du hast bisher"}),(0,n.jsxs)("p",{className:"text-5xl font-bold text-yellow-500",children:[t," Pokale"]}),(0,n.jsx)("p",{className:"text-lg mt-2",children:"gesammelt!"})]}),(0,n.jsx)("div",{className:"grid grid-cols-5 gap-4 w-full",children:Array.from({length:r}).map((e,r)=>(0,n.jsx)("div",{className:"aspect-square rounded-full flex items-center justify-center ".concat(r<t?"bg-yellow-400":"bg-gray-200"),children:r<t?"\uD83C\uDFC6":""},r))})]})},o=e=>{let{onGenerate:t,isGenerating:r,generatedImageUrl:s}=e;return(0,n.jsxs)("div",{className:"w-full space-y-4",children:[(0,n.jsx)("button",{onClick:t,className:"w-full py-3 bg-purple-500 hover:bg-purple-600 text-white font-bold rounded-lg",disabled:r||!!s,children:r?"Generiere Bild...":"Bild generieren"}),s&&(0,n.jsxs)("div",{className:"flex flex-col items-center",children:[(0,n.jsx)("p",{className:"text-lg font-medium mb-2",children:"Dein generiertes Bild:"}),(0,n.jsx)("div",{className:"w-full h-48 bg-gray-200 rounded-lg flex items-center justify-center overflow-hidden",children:"placeholder"===s?(0,n.jsx)("p",{className:"text-gray-500",children:"Bild wird hier angezeigt"}):(0,n.jsx)("img",{src:s,alt:"Generiertes Bild",className:"w-full h-full object-contain"})})]})]})};var c=r(9188),h=r(2498);function d(){let{trophies:e,safeMode:t}=(0,c.r)(),r=(0,h.O)(),[i,d]=(0,s.useState)(!1),[u,m]=(0,s.useState)(null),[g,f]=(0,s.useState)(!1);(0,s.useEffect)(()=>{e>=10&&d(!0)},[e]);let p=async()=>{f(!0);try{let n=await r.generateImage(e,t);m(n)}catch(e){console.error("Fehler beim Generieren des Bildes:",e),m("placeholder")}finally{f(!1)}};return(0,n.jsx)("div",{className:"flex flex-col items-center justify-center min-h-screen bg-blue-50 p-4",children:(0,n.jsxs)("div",{className:"w-full max-w-md bg-white rounded-xl shadow-lg p-6 space-y-6",children:[(0,n.jsxs)("div",{className:"flex justify-between items-center",children:[(0,n.jsx)("h1",{className:"text-2xl font-bold text-blue-600",children:"Meine Pokale"}),(0,n.jsx)(a(),{href:"/start",children:(0,n.jsx)("button",{className:"px-4 py-2 bg-gray-200 hover:bg-gray-300 rounded-lg",children:"Zur\xfcck"})})]}),(0,n.jsxs)("div",{className:"flex flex-col items-center space-y-6",children:[(0,n.jsx)(l,{count:e,maxCount:10}),i&&(0,n.jsx)(o,{onGenerate:p,isGenerating:g,generatedImageUrl:u}),(0,n.jsx)(a(),{href:"/uebungen",children:(0,n.jsx)("button",{className:"px-6 py-3 bg-green-500 hover:bg-green-600 text-white font-bold rounded-lg",children:"Mehr Pokale sammeln"})})]})]})})}},2498:(e,t,r)=>{"use strict";r.d(t,{O:()=>i});class n{setApiKey(e){this.apiKey=e,localStorage.setItem("openai_api_key",e)}hasApiKey(){return!!this.apiKey}async generateWord(e){if(!this.apiKey)throw Error("Kein API-Key gesetzt");try{let t=this.getDifficultyDescription(e),r=await fetch("https://api.openai.com/v1/chat/completions",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(this.apiKey)},body:JSON.stringify({model:this.model,messages:[{role:"system",content:"Du bist ein Lehrer, der Kindern beim Lesenlernen hilft. Generiere ein einzelnes deutsches Wort f\xfcr eine Lese\xfcbung. Das Wort sollte f\xfcr die folgende Schwierigkeitsstufe geeignet sein: ".concat(t,". Antworte nur mit dem Wort, ohne Anf\xfchrungszeichen oder zus\xe4tzlichen Text.")}],max_tokens:50,temperature:.7})});if(!r.ok)throw Error("API-Fehler: ".concat(r.status));return(await r.json()).choices[0].message.content.trim()}catch(e){return console.error("Fehler beim Generieren des Wortes:",e),["Hund","Katze","Maus","Haus","Ball"][Math.floor(5*Math.random())]}}async checkAnswer(e,t){if(!this.apiKey){let r=e.toLowerCase()===t.toLowerCase();return{correct:r,feedback:r?"Richtig! Gut gemacht!":"Nicht ganz richtig. Versuche es noch einmal!"}}try{let r=await fetch("https://api.openai.com/v1/chat/completions",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(this.apiKey)},body:JSON.stringify({model:this.model,messages:[{role:"system",content:"Du bist ein freundlicher Lehrer, der Kindern beim Lesenlernen hilft. \xdcberpr\xfcfe, ob die Antwort des Kindes korrekt ist und gib ein kurzes, motivierendes Feedback."},{role:"user",content:'Das zu lesende Wort ist "'.concat(e,'". Die Antwort des Kindes ist "').concat(t,'". Ist die Antwort korrekt? Antworte im JSON-Format: {"correct": true/false, "feedback": "Dein Feedback"}')}],max_tokens:100,temperature:.5})});if(!r.ok)throw Error("API-Fehler: ".concat(r.status));let n=(await r.json()).choices[0].message.content;try{let e=JSON.parse(n);return{correct:e.correct,feedback:e.feedback}}catch(n){let r=e.toLowerCase()===t.toLowerCase();return{correct:r,feedback:r?"Richtig! Gut gemacht!":"Nicht ganz richtig. Versuche es noch einmal!"}}}catch(n){console.error("Fehler beim \xdcberpr\xfcfen der Antwort:",n);let r=e.toLowerCase()===t.toLowerCase();return{correct:r,feedback:r?"Richtig! Gut gemacht!":"Nicht ganz richtig. Versuche es noch einmal!"}}}async generateImage(e){let t=!(arguments.length>1)||void 0===arguments[1]||arguments[1];if(!this.apiKey)throw Error("Kein API-Key gesetzt");try{let r=this.getImagePrompt(e,t),n=await fetch("https://api.openai.com/v1/images/generations",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(this.apiKey)},body:JSON.stringify({model:this.imageModel,prompt:r,n:1,size:"1024x1024"})});if(!n.ok)throw Error("API-Fehler: ".concat(n.status));return(await n.json()).data[0].url}catch(e){throw console.error("Fehler beim Generieren des Bildes:",e),e}}getDifficultyDescription(e){switch(e){case 1:return"Sehr einfach: Kurze W\xf6rter mit 2-3 Buchstaben, einfache Laute, keine Umlaute oder Doppellaute.";case 2:return"Einfach: W\xf6rter mit 3-4 Buchstaben, einfache Laute, keine komplexen Buchstabenkombinationen.";case 3:default:return"Mittel: W\xf6rter mit 4-5 Buchstaben, kann Umlaute enthalten, einfache Alltagsw\xf6rter.";case 4:return"Fortgeschritten: W\xf6rter mit 5-6 Buchstaben, kann Doppellaute und Umlaute enthalten.";case 5:return"Herausfordernd: L\xe4ngere W\xf6rter mit 6-8 Buchstaben, kann komplexere Buchstabenkombinationen enthalten."}}getImagePrompt(e,t){return"Ein kindgerechtes, fr\xf6hliches Bild f\xfcr ein Kind, das gerade ".concat(e," Lese\xfcbungen erfolgreich abgeschlossen hat. Das Bild sollte motivierend und belohnend wirken.")+(t?" Das Bild muss absolut kindgerecht sein, ohne be\xe4ngstigende oder unangemessene Elemente.":"")+" Im Stil einer bunten, freundlichen Kinderillustration."}constructor(){this.apiKey="",this.model="gpt-4o-mini-realtime-preview-2024-12-17",this.imageModel="dall-e-3",this.apiKey=localStorage.getItem("openai_api_key")||""}}let s=null;function i(){return s||(s=new n),s}},9188:(e,t,r)=>{"use strict";r.d(t,{f:()=>l,r:()=>o});var n=r(1133),s=r(1321),i=r(2498);let a=(0,s.createContext)(void 0);function l(e){let{children:t}=e,[r,l]=(0,s.useState)(0),[o,c]=(0,s.useState)(3),[h,d]=(0,s.useState)(!0),[u,m]=(0,s.useState)(""),g=(0,i.O)();return(0,s.useEffect)(()=>{{let e=parseInt(localStorage.getItem("trophies")||"0"),t=parseInt(localStorage.getItem("difficulty")||"3"),r="false"!==localStorage.getItem("safe_mode"),n=localStorage.getItem("openai_api_key")||"";l(e),c(t),d(r),m(n),n&&g.setApiKey(n)}},[]),(0,s.useEffect)(()=>{localStorage.setItem("trophies",r.toString())},[r]),(0,s.useEffect)(()=>{localStorage.setItem("difficulty",o.toString())},[o]),(0,s.useEffect)(()=>{localStorage.setItem("safe_mode",h.toString())},[h]),(0,s.useEffect)(()=>{localStorage.setItem("openai_api_key",u),g.setApiKey(u)},[u]),(0,n.jsx)(a.Provider,{value:{trophies:r,addTrophy:()=>{l(e=>e+1)},difficulty:o,setDifficulty:c,safeMode:h,setSafeMode:d,apiKey:u,setApiKey:m},children:t})}function o(){let e=(0,s.useContext)(a);if(void 0===e)throw Error("useReadingApp must be used within a ReadingAppProvider");return e}}},e=>{var t=t=>e(e.s=t);e.O(0,[587,634,775,358],()=>t(4682)),_N_E=e.O()}]);