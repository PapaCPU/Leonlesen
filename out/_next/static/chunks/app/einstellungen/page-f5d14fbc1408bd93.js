(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[328],{6135:(e,t,r)=>{Promise.resolve().then(r.bind(r,9258))},9258:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>h});var s=r(1133),n=r(1321),a=r(3587),i=r.n(a);let o=e=>{let{apiKey:t,onApiKeyChange:r,onSave:n,isSaved:a}=e;return(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)("label",{htmlFor:"apiKey",className:"block text-sm font-medium text-gray-700",children:"OpenAI API-Schl\xfcssel"}),(0,s.jsx)("input",{type:"password",id:"apiKey",value:t,onChange:e=>r(e.target.value),className:"w-full p-3 border-2 border-blue-300 rounded-lg",placeholder:"sk-..."}),(0,s.jsx)("p",{className:"text-xs text-gray-500",children:"Dein API-Schl\xfcssel wird nur lokal auf diesem Ger\xe4t gespeichert."})]}),(0,s.jsx)("button",{onClick:n,className:"w-full py-3 bg-blue-500 hover:bg-blue-600 text-white font-bold rounded-lg",children:"Speichern"}),a&&(0,s.jsx)("div",{className:"p-3 bg-green-100 text-green-700 rounded-lg text-center",children:"Einstellungen gespeichert!"})]})},c=e=>{let{difficulty:t,onDifficultyChange:r,safeMode:n,onSafeModeChange:a}=e;return(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)("h2",{className:"text-lg font-medium text-gray-700",children:"Lese\xfcbungen"}),(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsx)("input",{type:"range",min:"1",max:"5",value:t,onChange:e=>r(parseInt(e.target.value)),className:"w-full"}),(0,s.jsxs)("span",{className:"text-sm text-gray-600",children:["Schwierigkeit: ",t]})]})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)("h2",{className:"text-lg font-medium text-gray-700",children:"Bildgenerierung"}),(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsx)("input",{type:"checkbox",id:"safeMode",checked:n,onChange:e=>a(e.target.checked),className:"h-4 w-4 text-blue-600 rounded"}),(0,s.jsx)("label",{htmlFor:"safeMode",className:"text-sm text-gray-600",children:"Kindersicheren Modus aktivieren"})]})]})]})};var l=r(9188);function h(){let{apiKey:e,setApiKey:t,difficulty:r,setDifficulty:a,safeMode:h,setSafeMode:d}=(0,l.r)(),[u,m]=(0,n.useState)(!1);return(0,s.jsx)("div",{className:"flex flex-col items-center justify-center min-h-screen bg-blue-50 p-4",children:(0,s.jsxs)("div",{className:"w-full max-w-md bg-white rounded-xl shadow-lg p-6 space-y-6",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center",children:[(0,s.jsx)("h1",{className:"text-2xl font-bold text-blue-600",children:"Einstellungen"}),(0,s.jsx)(i(),{href:"/start",children:(0,s.jsx)("button",{className:"px-4 py-2 bg-gray-200 hover:bg-gray-300 rounded-lg",children:"Zur\xfcck"})})]}),(0,s.jsxs)("div",{className:"space-y-8",children:[(0,s.jsx)(o,{apiKey:e,onApiKeyChange:t,onSave:()=>{m(!0),setTimeout(()=>{m(!1)},2e3)},isSaved:u}),(0,s.jsx)(c,{difficulty:r,onDifficultyChange:a,safeMode:h,onSafeModeChange:d})]})]})})}},2498:(e,t,r)=>{"use strict";r.d(t,{O:()=>a});class s{setApiKey(e){this.apiKey=e,localStorage.setItem("openai_api_key",e)}hasApiKey(){return!!this.apiKey}async generateWord(e){if(!this.apiKey)throw Error("Kein API-Key gesetzt");try{let t=this.getDifficultyDescription(e),r=await fetch("https://api.openai.com/v1/chat/completions",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(this.apiKey)},body:JSON.stringify({model:this.model,messages:[{role:"system",content:"Du bist ein Lehrer, der Kindern beim Lesenlernen hilft. Generiere ein einzelnes deutsches Wort f\xfcr eine Lese\xfcbung. Das Wort sollte f\xfcr die folgende Schwierigkeitsstufe geeignet sein: ".concat(t,". Antworte nur mit dem Wort, ohne Anf\xfchrungszeichen oder zus\xe4tzlichen Text.")}],max_tokens:50,temperature:.7})});if(!r.ok)throw Error("API-Fehler: ".concat(r.status));return(await r.json()).choices[0].message.content.trim()}catch(e){return console.error("Fehler beim Generieren des Wortes:",e),["Hund","Katze","Maus","Haus","Ball"][Math.floor(5*Math.random())]}}async checkAnswer(e,t){if(!this.apiKey){let r=e.toLowerCase()===t.toLowerCase();return{correct:r,feedback:r?"Richtig! Gut gemacht!":"Nicht ganz richtig. Versuche es noch einmal!"}}try{let r=await fetch("https://api.openai.com/v1/chat/completions",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(this.apiKey)},body:JSON.stringify({model:this.model,messages:[{role:"system",content:"Du bist ein freundlicher Lehrer, der Kindern beim Lesenlernen hilft. \xdcberpr\xfcfe, ob die Antwort des Kindes korrekt ist und gib ein kurzes, motivierendes Feedback."},{role:"user",content:'Das zu lesende Wort ist "'.concat(e,'". Die Antwort des Kindes ist "').concat(t,'". Ist die Antwort korrekt? Antworte im JSON-Format: {"correct": true/false, "feedback": "Dein Feedback"}')}],max_tokens:100,temperature:.5})});if(!r.ok)throw Error("API-Fehler: ".concat(r.status));let s=(await r.json()).choices[0].message.content;try{let e=JSON.parse(s);return{correct:e.correct,feedback:e.feedback}}catch(s){let r=e.toLowerCase()===t.toLowerCase();return{correct:r,feedback:r?"Richtig! Gut gemacht!":"Nicht ganz richtig. Versuche es noch einmal!"}}}catch(s){console.error("Fehler beim \xdcberpr\xfcfen der Antwort:",s);let r=e.toLowerCase()===t.toLowerCase();return{correct:r,feedback:r?"Richtig! Gut gemacht!":"Nicht ganz richtig. Versuche es noch einmal!"}}}async generateImage(e){let t=!(arguments.length>1)||void 0===arguments[1]||arguments[1];if(!this.apiKey)throw Error("Kein API-Key gesetzt");try{let r=this.getImagePrompt(e,t),s=await fetch("https://api.openai.com/v1/images/generations",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(this.apiKey)},body:JSON.stringify({model:this.imageModel,prompt:r,n:1,size:"1024x1024"})});if(!s.ok)throw Error("API-Fehler: ".concat(s.status));return(await s.json()).data[0].url}catch(e){throw console.error("Fehler beim Generieren des Bildes:",e),e}}getDifficultyDescription(e){switch(e){case 1:return"Sehr einfach: Kurze W\xf6rter mit 2-3 Buchstaben, einfache Laute, keine Umlaute oder Doppellaute.";case 2:return"Einfach: W\xf6rter mit 3-4 Buchstaben, einfache Laute, keine komplexen Buchstabenkombinationen.";case 3:default:return"Mittel: W\xf6rter mit 4-5 Buchstaben, kann Umlaute enthalten, einfache Alltagsw\xf6rter.";case 4:return"Fortgeschritten: W\xf6rter mit 5-6 Buchstaben, kann Doppellaute und Umlaute enthalten.";case 5:return"Herausfordernd: L\xe4ngere W\xf6rter mit 6-8 Buchstaben, kann komplexere Buchstabenkombinationen enthalten."}}getImagePrompt(e,t){return"Ein kindgerechtes, fr\xf6hliches Bild f\xfcr ein Kind, das gerade ".concat(e," Lese\xfcbungen erfolgreich abgeschlossen hat. Das Bild sollte motivierend und belohnend wirken.")+(t?" Das Bild muss absolut kindgerecht sein, ohne be\xe4ngstigende oder unangemessene Elemente.":"")+" Im Stil einer bunten, freundlichen Kinderillustration."}constructor(){this.apiKey="",this.model="gpt-4o-mini-realtime-preview-2024-12-17",this.imageModel="dall-e-3",this.apiKey=localStorage.getItem("openai_api_key")||""}}let n=null;function a(){return n||(n=new s),n}},9188:(e,t,r)=>{"use strict";r.d(t,{f:()=>o,r:()=>c});var s=r(1133),n=r(1321),a=r(2498);let i=(0,n.createContext)(void 0);function o(e){let{children:t}=e,[r,o]=(0,n.useState)(0),[c,l]=(0,n.useState)(3),[h,d]=(0,n.useState)(!0),[u,m]=(0,n.useState)(""),g=(0,a.O)();return(0,n.useEffect)(()=>{{let e=parseInt(localStorage.getItem("trophies")||"0"),t=parseInt(localStorage.getItem("difficulty")||"3"),r="false"!==localStorage.getItem("safe_mode"),s=localStorage.getItem("openai_api_key")||"";o(e),l(t),d(r),m(s),s&&g.setApiKey(s)}},[]),(0,n.useEffect)(()=>{localStorage.setItem("trophies",r.toString())},[r]),(0,n.useEffect)(()=>{localStorage.setItem("difficulty",c.toString())},[c]),(0,n.useEffect)(()=>{localStorage.setItem("safe_mode",h.toString())},[h]),(0,n.useEffect)(()=>{localStorage.setItem("openai_api_key",u),g.setApiKey(u)},[u]),(0,s.jsx)(i.Provider,{value:{trophies:r,addTrophy:()=>{o(e=>e+1)},difficulty:c,setDifficulty:l,safeMode:h,setSafeMode:d,apiKey:u,setApiKey:m},children:t})}function c(){let e=(0,n.useContext)(i);if(void 0===e)throw Error("useReadingApp must be used within a ReadingAppProvider");return e}}},e=>{var t=t=>e(e.s=t);e.O(0,[587,634,775,358],()=>t(6135)),_N_E=e.O()}]);